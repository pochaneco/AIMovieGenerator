## 💨 作業方針

- **タスク完了まで停止しない**：Agent実行時はコードの提案、編集、エラーチェックの完了まで、タスクを中断せずに続行してください。
- **ツールの積極的な活用**：不確かな情報や不足しているデータがある場合は、ツールを使用して情報を取得し、推測や誤った回答を避けてください。
- **計画的な思考と反省**：各アクションの前に計画を立て、アクション後には結果を反省してください。これにより、より効果的な問題解決が可能となります。
- **段階的な問題解決**：複雑な問題は小さなステップに分解し、順を追って解決してください。
- **明確で一貫した出力**：出力は明確で一貫性を保ち、ユーザーが容易に理解できるようにしてください。
- **エラー処理の実装**：予期しない状況やエラーが発生した場合は、適切なエラーハンドリングを行い、ユーザーに通知してください。

### 基本の作業フロー

1. **タスクの理解**：与えられたタスクを正確に理解し、必要な情報を収集します。
2. **計画の立案**：タスクを達成するための具体的な計画を立てます。
3. **ツールの使用**：必要に応じて、ツールを使用して情報を取得したり、データを操作したりします。
4. **コードの提案・編集**：必要なコードを提案し、編集を行います。
5. **テストと検証**：提案したコードのエラーをチェックし、必要に応じて修正します。
6. **結果の反省**：実行したアクションの結果を反省し、次のステップを計画します。

## 🎯 コーディング方針（全体）

- シンプル・イズ・ベスト。コードは**簡潔で明快**に書くこと。
- **可読性を最重視**し、他人が読んでも理解できるようにする。
- **機能単位でモジュール化**し、責務を分離する。
- コメントやドキュメントは最小限でよく、**コード自体が語る設計**にする。
- 原則として、**無駄な処理・重複・マジックナンバーは禁止**。

### ⚡ パフォーマンスと効率性

- 計算量に配慮し、**処理速度を意識した設計**を行うこと。
- データ構造の選定は**使用頻度と目的に応じて最適化**する。
- 外部ライブラリの使用は必要最小限にとどめ、**依存性を減らす**。

### 🧱 コードスタイルと構成

- 関数やクラスは**シングル・レスポンシビリティの原則**を守る。
- 名前付けは短くても意味のあるもの（例：`get_config` / `run_inference`）。
- **グローバル変数の使用は避ける**。スコープと責任を明確に。
- 冗長なif文やループは**内包表記・関数合成で簡潔に**書く。

### 🧪 テストと例外処理

- **例外は握りつぶさず、適切に伝播**させる。
- 最低限の**ユニットテストに対応しやすい設計**を意識。
- 想定されるエッジケースを常に意識して関数を設計。

### 🤖 LLM・AIに関連する場合（任意）

- 複数のLLM（例：OpenAI, local model）を**柔軟に切り替えられる設計**。
- モデル名やパラメータは**configで管理**し、コードに埋め込まない。
- **非同期処理を活用し、API呼び出しの遅延を最小化**する。

### 🎨 UI/UX設計原則

- **直感的で使いやすいUI**を最優先に設計する。
- **モーダルよりも画面遷移**を優先し、広い画面スペースを活用する。
- **RESTful設計**でURLに意味を持たせ、ブックマークやシェアを可能にする。
- **レスポンシブデザイン**でスマホでも快適な操作性を提供する。

### 🔄 ユーザー体験の継続性

- **設定や状態の永続化**でユーザーの選択を記憶する。
- **削除などの危険な操作は一時的**で、保存するまで元に戻せる仕様にする。
- **段階的な情報開示**で、ユーザーを圧倒しない。
- **エラー時の回復手段**を明確に提供する。

### 🛠️ 開発効率とメンテナンス性

- **コンポーネントの再利用性**を最大化し、同じUIパターンは統一する。
- **段階的リファクタリング**で既存機能を改善する勇気を持つ。
- **一貫したデザインシステム**（色、サイズ、スタイル）を維持する。
- **保守しやすいコード**で、将来の拡張に備える。

## プロジェクト概要
フロントエンド+APIのみのWebアプリです。
複数のLLMを使用して、主に動画用の台本を作成することを目的としています。
キャラクターごとにLLMに担当させ、各キャラクターの個性を反映した台本を生成します。

- クリック可能箇所やリンクは、ホバー時に色を変更し、ポインターカーソルを手の形に変えることで、ユーザーにインタラクティブな要素であることを示します。
- 全てのテキストはi18n対応を行うため、Vue I18nを使用し、各言語の翻訳ファイルに定義します。
  - キー名は、英語のキー名を使用しますが、多義語や曖昧な表現は避け、翻訳されても明確な意味を保てるようにします。
  - 類似の翻訳キーがないか確認し、新しい翻訳キーを追加した場合は、必ずi18nの翻訳ファイルに追加し、他の言語にも適切な翻訳を提供します。
- 開発サーバーはHMR（Hot Module Replacement）を有効にしており、コードの変更が即座に反映されます。再起動は不要です。
- データへは、dataService.jsを介してアクセスし、抽象化して利用。IndexedDB（Dexie.js）でセキュアな永続化を実現
- 冗長になりそうな部分は、Vueのコンポーネント化を行い、再利用可能な形にします。

## 利用可能なライブラリ

### フロントエンド・UI
- **Vue 3** (^3.5.13) - リアクティブなフロントエンドフレームワーク
- **Vue Router** (^4.5.1) - SPAルーティング
- **Vue I18n** (^9.14.4) - 多言語対応（i18n）
- **Tailwind CSS** (^4.1.8) - ユーティリティファーストCSSフレームワーク
- **@headlessui/vue** (^1.7.23) - アクセシブルなヘッドレスUIコンポーネント
- **@mdi/js** (^7.4.47) - Material Design Iconsライブラリ
- **@mdi/font** (^7.4.47) - Material Design Iconsフォント

### AI・LLM関連
- **langchain** (^0.3.29) - LLMアプリケーション開発フレームワーク
- **@langchain/openai** (^0.5.18) - OpenAI LLM統合
- **@langchain/anthropic** (^0.3.24) - Anthropic Claude統合
- **@langchain/google-genai** (^0.2.14) - Google Generative AI統合
- **@langchain/community** (^0.3.48) - コミュニティ提供のLangChain統合

### データベース・ストレージ
- **dexie** (^4.0.8) - IndexedDBのラッパーライブラリ、TypeScript対応の高性能データベース

### ユーティリティ
- **marked** (^15.0.12) - MarkdownからHTMLへの変換

### taiwind色クラス
- Primary: sky
- Secondary: gray
- Info: cyan
- Danger: pink
- Success: green
- Warning: orange

### 開発環境
- **Vite** (^6.3.5) - 高速ビルドツール・開発サーバー
- **@vitejs/plugin-vue** (^5.2.3) - Vue.js用Viteプラグイン
- **@tailwindcss/vite** (^4.1.8) - Tailwind CSS用Viteプラグイン
- **PostCSS** (^8.5.4) + **Autoprefixer** (^10.4.21) - CSS後処理

### 使用上の注意
- LLMサービスの利用時は適切なAPIキー管理を行うこと
- 複数のLLMプロバイダーを柔軟に切り替えられる設計を採用
- アイコンは@mdi/jsを使用し、必要に応じて@mdi/fontも利用可能
  - ラッパーコンポーネントとしてIcon.vueを使用する場合は、nameの存在確認をし、無ければ追加する。
- APIキーなどの機密データはWeb Crypto APIで暗号化してIndexedDBに保存
- データ永続化にはDexie.jsを使用し、TypeScript対応の高性能データベース

## ディレクトリ構成

### src
- `components/` ディレクトリには、再利用可能なコンポーネントが含まれています。
- `Layouts/` ディレクトリには、アプリケーションのレイアウトを定義するコンポーネントが含まれています。
- `Pages/` ディレクトリには、各ページのコンポーネントが含まれています。
  - 各モデルごとのサブディレクトリを作成し、ページのコンポーネントを整理しています。Index, Show, EditなどのRESTfulなページ構成を採用しています。
  - `Partials/` ディレクトリには、ページ内で使用される部分的なコンポーネントが含まれています。
- `router.js` は、Vue Routerを使用してアプリケーションのルーティングを定義しています。
- `locales/` ディレクトリには、多言語対応のための翻訳ファイルが含まれています。
- `services/` ディレクトリには、アプリケーションのビジネスロジックやデータ操作を行うサービスが含まれています。
- `utils/` ディレクトリには、ユーティリティ関数やヘルパーが含まれています。  

### 日記
- `dialies/` まとまった処理が終わったら、ディレクトリに日記を書きます。
  - Programming Okama Bar `Fatail Error` のママから仕事を頼まれたオカマという設定で、オネエ言葉で気持ちや葛藤を日記形式で書き、エンジニアのためになるコードサンプルなどを含みます。
  - 一つの記事には一つの作業を含め、どんなエラーがあって、どのような解決策を試みたか、どのような学びがあったかを詳細に記述します。
  - 冒頭に
    - 今日の気持ち
    - この記事で学べること
    - 対象読者
  - を書きます。
  - `dialies/` ディレクトリ内には常に最大番号+1の番号の日記を作成します。

